(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48c8e174"],{"44c8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"send-currency-container"},[a("interface-container-title",{attrs:{title:e.$t("common.sendTx")}}),a("div",{staticClass:"send-form"},[a("div",{staticClass:"form-block amount-to-address"},[a("div",{staticClass:"amount"},[a("div",{staticClass:"single-input-block"},[a("div",{staticClass:"title"},[a("h4",[e._v(e._s(e.$t("interface.sendTxType")))])]),a("currency-picker",{attrs:{currency:e.tokensWithBalance,"get-src-twenty-tokens":e.getSrcTwentyTokens,page:"sendEgasAmountthAndTokens",token:!0,default:""!==e.selectedCurrency?e.selectedCurrency:{}},on:{selectedCurrency:function(t){e.selectedCurrency=t}}})],1),a("div",{staticClass:"single-input-block"},[a("div",{staticClass:"title"},[a("h4",[e._v(e._s(e.$t("interface.sendTxAmount")))]),a("p",{staticClass:"title-button prevent-user-select",on:{click:e.sendEntireBalance}},[e._v("\n              Entire Balance\n            ")])]),a("div",{staticClass:"the-form amount-number"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"min_value:0",expression:"'min_value:0'"},{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"number",placeholder:"Amount",min:"0",name:"value",step:"any"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),a("i",{class:[!e.isValidAmount.valid||e.errors.has("value")?"not-good":"","fa fa-check-circle good-button"],attrs:{"aria-hidden":"true"}})]),!e.isValidAmount.valid||e.errors.has("value")?a("div",{staticClass:"error-message-container"},[a("p",[e._v(e._s(e.isValidAmount.msg))])]):e._e()])]),a("div",{staticClass:"to-address"},[a("div",{staticClass:"title"},[a("h4",[e._v("\n            "+e._s(e.$t("interface.sendTxToAddr"))+"\n            "),a("blockie",{directives:[{name:"show",rawName:"v-show",value:e.isValidAddress,expression:"isValidAddress"}],staticClass:"blockie-image",attrs:{address:e.hexAddress,size:8,scale:16,diameter:32,width:"32px",height:"32px"}})],1),a("p",{staticClass:"copy-button prevent-user-select",on:{click:function(t){return e.copyToClipboard("address")}}},[e._v("\n            "+e._s(e.$t("common.copy"))+"\n          ")])]),a("div",{staticClass:"the-form address-block"},[a("input",{directives:[{name:"ens-resolver",rawName:"v-ens-resolver",value:"address",expression:"'address'"},{name:"model",rawName:"v-model",value:e.address,expression:"address"}],ref:"address",attrs:{type:"text",name:"name",autocomplete:"off"},domProps:{value:e.address},on:{input:function(t){t.target.composing||(e.address=t.target.value)}}}),a("i",{class:[e.isValidAddress&&0!==e.hexAddress.length?"":"not-good","fa fa-check-circle good-button"],attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"tx-fee"},[a("div",{staticClass:"title"},[a("h4",[e._v("\n            "+e._s(e.$t("common.txFee"))+"\n          ")]),a("p",{staticClass:"copy-button prevent-user-select",on:{click:e.openSettings}},[e._v("\n            "+e._s(e.$t("common.edit"))+"\n          ")])]),a("div",{staticClass:"fee-value"},[a("div",{staticClass:"gwei"},[e._v("\n            "+e._s(e.gasPrice)+" Gwei\n            ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:"ETH"===e.network.type.name,expression:"network.type.name === 'ETH'"}],staticClass:"usd"},[e._v("\n            Cost "+e._s(e.txFeeEth)+" ETH = $"+e._s(e.convert)+"\n          ")])])])])]),a("div",{staticClass:"send-form advanced"},[a("div",{staticClass:"advanced-content"},[a("div",{staticClass:"toggle-button-container"},[a("h4",[e._v(e._s(e.$t("common.advanced")))]),a("div",{staticClass:"toggle-button"},[a("span",[e._v(e._s(e.$t("interface.dataGas")))]),a("div",{staticClass:"sliding-switch-white"},[a("label",{staticClass:"switch"},[a("input",{attrs:{type:"checkbox"},on:{click:function(t){e.advancedExpand=!e.advancedExpand}}}),a("span",{staticClass:"slider round"})])])])]),a("div",{staticClass:"input-container",class:e.advancedExpand&&"input-container-open"},[a("div",{staticClass:"margin-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isToken,expression:"!isToken"}],staticClass:"the-form user-input"},[a("p",[e._v("Add Data")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],attrs:{type:"text",placeholder:"Add Data (e.g. 0x7834f874g298hf298h234f)",autocomplete:"off"},domProps:{value:e.data},on:{input:function(t){t.target.composing||(e.data=t.target.value)}}}),a("i",{class:[e.isValidData?"":"not-good","fa fa-check-circle good-button"],attrs:{"aria-hidden":"true"}})]),a("div",{staticClass:"the-form user-input"},[a("p",[e._v(e._s(e._f("capitalize")(e.$t("common.gasLimit"))))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.gasLimit,expression:"gasLimit"}],attrs:{placeholder:e.$t("common.gasLimit"),type:"number",min:"0",name:""},domProps:{value:e.gasLimit},on:{input:function(t){t.target.composing||(e.gasLimit=t.target.value)}}}),a("i",{class:[e.isValidGasLimit?"":"not-good","fa fa-check-circle good-button"],attrs:{"aria-hidden":"true"}})])])])])]),a("div",{staticClass:"submit-button-container"},[a("div",{class:[e.validInputs?"":"disabled","submit-button large-round-button-green-filled"],on:{click:e.submitTransaction}},[e._v("\n      "+e._s(e.$t("interface.sendTx"))+"\n    ")]),a("interface-bottom-text",{attrs:{"link-text":e.$t("interface.helpCenter"),question:e.$t("interface.haveIssues"),link:"https://kb.smilowallet.io"}})],1)],1)},s=[],i=(a("96cf"),a("3b8d")),r=(a("7f7f"),a("7514"),a("ac6a"),a("456d"),a("6b54"),a("28a5"),a("cebc")),o=a("2f62"),c=a("55c1"),l=a("d7a2"),d=a("539d"),u=a("c8e5"),h=a("8d23"),m=a("ce96"),v=a("901e"),p=a.n(v),f=a("70c1"),g=a.n(f),w=a("d65a"),b=a.n(w),x=a("a18f"),y=a.n(x),k={components:{"interface-container-title":c["a"],"interface-bottom-text":d["a"],blockie:u["a"],"currency-picker":l["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},getBalance:{type:Function,default:function(){}},highestGas:{type:String,default:"0"},getSrcTwentyTokens:{type:Function,default:function(){}}},data:function(){return{advancedExpand:!1,isValidAddress:!1,hexAddress:"",address:"",value:"0",gasLimit:"21000",data:"",selectedCurrency:"",ethPrice:0}},computed:Object(r["a"])({},Object(o["b"])(["account","gasPrice","web3","network","linkQuery","online"]),{txFee:function(){return new p.a(g.a.toWei(this.gasPrice,"gwei")).times(this.gasLimit||0)},txFeeEth:function(){return new p.a(this.txFee).gt(0)?g.a.fromWei(this.txFee,"ether"):0},isValidAmount:function(){var e=this.$t("errorsGlobal.notAValidAmountTotal")+" Gas "+this.$t("errorsGlobal.toSend"),t=this.$t("errorsGlobal.notAValidAmountTotal")+" "+this.selectedCurrency.symbol+" "+this.$t("errorsGlobal.toSend"),a=this.$t("errorsGlobal.notAValidAmountTotal")+" "+this.network.type.currencyName+" "+this.$t("errorsGlobal.toSend"),n=this.$t("errorsGlobal.invalidValue"),s=new p.a(this.value).lte(this.selectedCurrency.balance),i=new p.a(this.value).plus(this.txFeeEth).lte(this.balanceDefault),r=new p.a(this.txFeeEth).lte(this.balanceDefault),o=this.isValidDecimals;if(new p.a(this.value).lt(0))return{msg:n,valid:!1};if(this.isToken){var c=s&&r&&o;return{valid:c,msg:c?"":s?r?n:e:t}}return{valid:i&&o,msg:i?"":i?n:a}},isValidDecimals:function(){var e=(this.value+"").split(".")[1];return!e||(this.isToken?e.length<=this.selectedCurrency.decimals:e.length<=18)},isValidData:function(){return m["b"].validateHexString(this.data)},isValidGasLimit:function(){return new p.a(this.gasLimit).gte(0)},balanceDefault:function(){return new p.a(g.a.fromWei(this.account.balance,"ether"))},validInputs:function(){return this.isValidAmount.valid&&this.isValidAddress&&new p.a(this.gasLimit).gte(0)&&m["b"].validateHexString(this.data)},isToken:function(){var e=this.network.type.currencyName;return this.selectedCurrency.symbol!==e},txData:function(){return this.isToken?this.getTokenTransferABI(this.value,this.selectedCurrency.decimals):m["b"].sanitizeHex(this.data)},txValue:function(){return this.isToken?"0x00":m["b"].sanitizeHex(g.a.toWei(this.value,"ether").toString(16))},txTo:function(){return this.isToken?this.selectedCurrency.address.toLowerCase():this.hexAddress.toLowerCase().trim()},multiWatch:function(){return this.value,this.isValidAddress,this.data,this.selectedCurrency,(new Date).getTime()/1e3},convert:function(){return this.ethPrice?new p.a(new p.a(this.txFeeEth).times(new p.a(this.ethPrice))).toFixed(2).toString():"--"}}),watch:{multiWatch:b.a._.debounce(function(){this.validInputs&&this.estimateGas()},500),tokensWithBalance:function(){if(Object.keys(this.linkQuery).length>0){var e=this.linkQuery,t=e.data,a=e.to,n=e.value,s=e.gaslimit,i=e.tokensymbol,r=i?this.tokensWithBalance.find(function(e){return e.symbol.toLowerCase()===i.toLowerCase()}):void 0;this.data=t&&m["b"].validateHexString(t)?t:"",this.value=n?new p.a(n).toFixed():0,this.hexAddress=a||"",this.address=a||"",this.gasLimit=s?new p.a(s).toString():"21000",this.selectedCurrency=r||this.selectedCurrency,m["c"].responseHandler("Form has been prefilled. Please proceed with caution!",m["c"].WARN),this.$store.dispatch("saveQueryVal",{})}},network:function(e){this.online&&"XSM"===e.type.name&&this.getEthPrice()}},mounted:function(){this.online&&"XSM"===this.network.type.name&&this.getEthPrice()},methods:{openSettings:function(){this.$eventHub.$emit("open-settings")},sendEntireBalance:function(){this.isToken?this.value=this.selectedCurrency.balance:this.value=this.balanceDefault.minus(g.a.fromWei(new p.a(g.a.toWei(this.gasPrice,"gwei")).times(21e3).toString(),"ether"))},getTokenTransferABI:function(e,t){var a=[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],n=new this.web3.eth.Contract(a);return n.methods.transfer(this.hexAddress.toLowerCase(),new p.a(e).times(new p.a(10).pow(t)).toFixed()).encodeABI()},estimateGas:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.getCoinbase();case 2:return t=e.sent,a={from:t,value:this.txValue,to:this.txTo,data:this.txData},e.next=6,this.web3.eth.estimateGas(a);case 6:this.gasLimit=e.sent;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),submitTransaction:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s,i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return window.scrollTo(0,0),e.prev=1,e.next=4,this.web3.eth.getCoinbase();case 4:return t=e.sent,e.next=7,this.web3.eth.getTransactionCount(t);case 7:a=e.sent,n={nonce:m["b"].sanitizeHex(new p.a(a).toString(16)),gasPrice:m["b"].sanitizeHex(g.a.toWei(this.gasPrice,"gwei").toString(16)),gasLimit:m["b"].sanitizeHex(new p.a(this.gasLimit).toString(16)),to:this.txTo,value:this.txValue,data:this.txData,chainId:this.network.type.chainID},s=new h["Transaction"](n),i=s.toJSON(!0),i.from=t,r=this.network.type.currencyName,i.token={tokenSymbol:r,amount:this.value},this.web3.eth.sendTransaction(i).catch(function(e){m["c"].responseHandler(e,m["c"].ERROR)}),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](1),m["c"].responseHandler(e.t0,m["c"].ERROR);case 20:case"end":return e.stop()}},e,this,[[1,17]])}));function t(){return e.apply(this,arguments)}return t}(),getEthPrice:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y()("https://cryptorates.mewapi.io/ticker?filter=ETH").then(function(e){return e.json()}).catch(function(e){m["c"].responseHandler(e,m["c"].ERROR)});case 2:t=e.sent,this.ethPrice=t.data.ETH.quotes.USD.price;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),copyToClipboard:function(e){this.$refs[e].select(),document.execCommand("copy")},getSrcTwentyTokenBalance:function(e){return this.$parent.getSrcTwentyTokenBalance(e)}}},C=k,T=(a("7cf6"),a("2877")),_=Object(T["a"])(C,n,s,!1,null,"afe778e6",null),A=_.exports;a.d(t,"default",function(){return A})},"745f":function(e,t,a){},"7cf6":function(e,t,a){"use strict";var n=a("745f"),s=a.n(n);s.a}}]);
//# sourceMappingURL=chunk-48c8e174.6691930e.js.map